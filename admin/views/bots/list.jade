extends ../layout
block append js
  script(src='/js/table.js')
block content
  .container
    +tableHeader('Bots','/bots/create','Create Bot')
    +alerts()
    form(method='post', role='form')
      table.table.table-bordered
        thead
          tr
            th
              input#toggle(type='checkbox')
            th Location
            th Host
            th Port
            th Groups
            th Sponsor
            th Hits
            th Created
            th Updated
            th Version
            th Active
        tbody
          each row,i in list
            tr
              td
                input(type='checkbox', name='remove[]', value=row.id)
              td(style='white-space:nowrap;')
                a(href='/bots/edit?id=#{row.id}')= row.location
              td
                a(href='/bots/edit?id=#{row.id}')= row.host
              td= row.port
              td
                if(!row.groups.length)
                  span.label.label-default (none)
                else
                  each g,i in row.groups.split(',')
                    if(g)
                      span.label.label-primary= g
                      =' '
              td(style='white-space:nowrap;')= row.sponsor.name
              td= row.hits
              td(style='white-space:nowrap;')= (new Date(row.metrics.dateCreated)).toLocaleString().replace(/\s+\([^)]+\)$/,'')
              td(style='white-space:nowrap;')= (new Date(row.metrics.dateModified)).toLocaleString().replace(/\s+\([^)]+\)$/,'')
              td(style='white-space:nowrap;')= row.metrics.version
              td
                span.glyphicon.glyphicon-align-center(class='glyphicon-'+(row.active?'ok-circle text-success':'ban-circle text-danger'))
      +tableFooter(page,count)
